version: ~> 1.0
language: c++
jobs:
  include:
    - name: Linux (Ubuntu Bionic)
      os: linux
      dist: bionic
      # virt: lxd
    - name: Linux (Ubuntu Xenial)
      os: linux
      dist: xenial
      # virt: lxd
      env: EXTRA_CXXFLAGS="-DARIA_OMIT_DEPRECATED_MATH_FUNCS -DLINUX_GETTID_USE_SYSCALL"
    - name: MacOSX
      os: osx
#    - name: Linux (Ubuntu Bionic on arm64)
#      os: linux
#      virt: lxd
#      arch: arm64
#      dist: bionic
git:
  depth: 1
script:
  - make -j4 CXXDEBUGFLAGS= CXXOPTFLAGS=-O0
